<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Game Dev Space V5.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;800&family=Inter:wght@300;400;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
:root{--neon:#22c55e;--bg:#050510}
*{box-sizing:border-box;font-family:Inter}
body{margin:0;background:var(--bg);color:#fff}

/* FUNDO HEX */
.hex-bg{
position:fixed;inset:0;z-index:-1;
background:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MiIgaGVpZ2h0PSI2MCI+PHBhdGggZD0iTTI2IDBMNTIgMTVWNDVMMjYgNjBMMCA0NVYxNUwyNiAwWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDM0LDE5Nyw5NCwuMTUpIi8+PC9zdmc+");
animation:pulse 6s infinite alternate
}
@keyframes pulse{
0%{filter:drop-shadow(0 0 5px #22c55e44)}
100%{filter:drop-shadow(0 0 18px #22c55eaa)}
}

header{text-align:center;padding:40px}
h1{font-family:Orbitron;color:var(--neon)}

.top-nav{
position:absolute;top:20px;right:20px;
display:flex;gap:10px
}
.btn{
background:var(--neon);color:#000;
border:none;padding:10px 18px;
border-radius:20px;font-weight:bold;cursor:pointer
}

.user-info{
display:flex;gap:10px;align-items:center;
background:#0008;border:1px solid var(--neon);
padding:6px 14px;border-radius:30px;cursor:pointer
}
.user-info img{width:30px;height:30px;border-radius:50%}

.search-bar{
max-width:500px;margin:20px auto;
display:flex;border-radius:30px;
overflow:hidden;border:1px solid var(--neon)
}
.search-bar input{
flex:1;background:#000;border:none;
color:#fff;padding:12px 20px;outline:none
}
.search-bar button{background:var(--neon);padding:0 20px}

.grid{
max-width:1200px;margin:auto;
display:grid;
grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
gap:25px;padding:20px
}
.card{
background:#0f1025;border-radius:12px;
border:1px solid #ffffff22;
overflow:hidden;cursor:pointer
}
.card img{width:100%;height:150px;object-fit:cover}
.card-info{padding:10px;font-weight:bold;text-align:center}
.badge{
position:absolute;top:10px;right:10px;
background:#000c;border-radius:10px;
padding:4px 10px;border:1px solid var(--neon)
}

/* MODAL */
.modal{
display:none;position:fixed;inset:0;
background:#000c;z-index:999;
align-items:center;justify-content:center
}
.modal-box{
background:#1b2838;padding:25px;
border-radius:10px;width:90%;max-width:420px
}
.modal-box input,textarea{
width:100%;margin:8px 0;padding:10px;
background:#000;color:#fff;border:1px solid #333
}

#gameView{display:none;padding:20px;text-align:center}
iframe{width:100%;height:70vh;border:none;border-radius:12px}
</style>
</head>
<body>

<div class="hex-bg"></div>

<header>
<div class="top-nav">
<button class="btn" onclick="openPost()">POSTAR JOGO</button>
<div id="userTrigger" class="user-info" style="display:none" onclick="openProfile()">
<img id="uPic"><span id="uNick"></span>
</div>
<button id="loginBtn" class="btn" onclick="authModal.style.display='flex'">LOGIN</button>
<button id="outBtn" class="btn" style="display:none;background:red;color:#fff"
onclick="auth.signOut().then(()=>location.reload())">SAIR</button>
</div>

<h1>GAME DEV SPACE</h1>

<div class="search-bar">
<input id="inpSearch" placeholder="Buscar jogo..." oninput="doSearch()">
<button>üîç</button>
</div>
</header>

<div id="home"><div class="grid" id="mainGrid"></div></div>
<div id="gameView"></div>

<!-- LOGIN -->
<div id="authModal" class="modal">
<div class="modal-box">
<h3>LOGIN</h3>
<input id="email" placeholder="Email">
<input id="pass" type="password" placeholder="Senha">
<button class="btn" style="width:100%" onclick="handleAuth()">ENTRAR</button>
<button class="btn" style="width:100%;background:#333" onclick="authModal.style.display='none'">CANCELAR</button>
</div>
</div>

<!-- PERFIL -->
<div id="profModal" class="modal">
<div class="modal-box">
<h3>MEU PERFIL</h3>
<input id="nickField" placeholder="Nick">
<input id="picField" placeholder="URL da Foto">
<input id="linkField" placeholder="Rede social (opcional)">
<button class="btn" onclick="saveProf()">SALVAR</button>
<button class="btn" style="background:#333" onclick="profModal.style.display='none'">CANCELAR</button>
</div>
</div>

<!-- POST GAME -->
<div id="postModal" class="modal">
<div class="modal-box">
<h3>POSTAR JOGO</h3>
<input id="gName" placeholder="Nome do jogo">
<textarea id="gDesc" placeholder="Descri√ß√£o"></textarea>
<input id="gImg" placeholder="URL da imagem">
<input id="gUrl" placeholder="Link do jogo">
<button class="btn" onclick="postGame()">PUBLICAR</button>
<button class="btn" style="background:#333" onclick="postModal.style.display='none'">CANCELAR</button>
</div>
</div>

<script>
firebase.initializeApp({
apiKey:"AIzaSyAMHAKVot044psR421B_t-Ht5EmsueVS8A",
authDomain:"game-dev-space.firebaseapp.com",
databaseURL:"https://game-dev-space-default-rtdb.firebaseio.com"
});
const auth=firebase.auth(),db=firebase.database();
let allGames=[],currentGameId="";

/* AUTH */
function handleAuth(){
auth.signInWithEmailAndPassword(email.value,pass.value)
.catch(()=>auth.createUserWithEmailAndPassword(email.value,pass.value))
.then(()=>authModal.style.display="none");
}

auth.onAuthStateChanged(u=>{
loginBtn.style.display=u?"none":"block";
outBtn.style.display=u?"block":"none";
userTrigger.style.display=u?"flex":"none";
if(u){
db.ref("profiles/"+u.uid).on("value",s=>{
const d=s.val()||{};
uNick.innerText=d.nick||"Perfil";
uPic.src=d.pic||"https://www.gravatar.com/avatar/0?d=mp";
});
}
});

/* PERFIL */
function openProfile(){
if(!auth.currentUser)return;
db.ref("profiles/"+auth.currentUser.uid).once("value").then(s=>{
const d=s.val()||{};
nickField.value=d.nick||"";
picField.value=d.pic||"";
linkField.value=d.link||"";
profModal.style.display="flex";
});
}
function saveProf(){
db.ref("profiles/"+auth.currentUser.uid).set({
nick:nickField.value,
pic:picField.value,
link:linkField.value
}).then(()=>profModal.style.display="none");
}

/* POST GAME */
function openPost(){
if(!auth.currentUser)return alert("Fa√ßa login");
postModal.style.display="flex";
}
function postGame(){
db.ref("games").push({
name:gName.value,
desc:gDesc.value,
img:gImg.value,
url:gUrl.value,
likes:0,
date:Date.now()
}).then(()=>postModal.style.display="none");
}

/* GAMES */
db.ref("games").on("value",s=>{
allGames=[];
s.forEach(c=>allGames.push({id:c.key,...c.val()}));
render(allGames);
});
function render(list){
mainGrid.innerHTML="";
list.sort((a,b)=>(b.likes||0)-(a.likes||0)).forEach(g=>{
const d=document.createElement("div");
d.className="card";
d.innerHTML=`
<div class="badge">‚ù§ ${g.likes||0}</div>
<img src="${g.img}">
<div class="card-info">${g.name}</div>`;
d.onclick=()=>openGame(g);
mainGrid.appendChild(d);
});
}
function doSearch(){
const t=inpSearch.value.toLowerCase();
render(allGames.filter(g=>g.name.toLowerCase().includes(t)));
}

/* GAME VIEW */
function openGame(g){
home.style.display="none";
gameView.style.display="block";
currentGameId=g.id;
gameView.innerHTML=`
<button class="btn" onclick="back()">VOLTAR</button>
<h2>${g.name}</h2>
<p>${g.desc||""}</p>
<iframe src="${g.url}"></iframe>
<button class="btn" onclick="like()">CURTIR ‚ù§</button>`;
}
function back(){
gameView.style.display="none";
home.style.display="block";
}
function like(){
db.ref("games/"+currentGameId+"/likes").transaction(l=>(l||0)+1);
}
</script>
</body>
</html>
